# IoTセンサ端末開発環境マニュアル

本ドキュメントは[こちら](../../README.md)のドキュメントを読んでいるものとします．
未読の人は先に[こちら](../../README.md)を読んでください．

本開発環境では，ユーザを2つの役割に分けるが，システム全体の統括，
必要な機材(や部材)の調達を担当するシステム管理者は，
自分がセンサ端末を開発しない場合であっても，ドキュメントは全て
目を通していただきたい．

IoTのネットワークの構築や，データを集約するサーバ(IoTゲートウェイ)の
セットアップを行わないユーザ(センサ端末開発者)は，ユーザの作業
部分だけを読んで実際の作業を行えば良い．

## 1. センサ端末を作成するユーザ(端末開発者)の作業
本プロジェクトでは，センサ端末を接続するネットワークやサーバの準備，
センサを搭載するArduinoマイコンの手配から組み立てまで管理者が行い，
ユーザはセンサを取り付けて，ソフトウェアをArduinoにインストールして
動作確認するところまでを行うことを想定している．

ユーザは以下のドキュメントを端末の組み立て等の作業を行いなから，
実施していただきたい．

なお，管理者も一度は以下のドキュメントに目を通す必要がある．

- [IoTおよびArduinoの概要](intro/IoT_Introduction.md)
- [開発用ソフトウェアのインストール](IDE/ArduinoIDEインストール.md)
- [利用するセンサの選択と接続](SensorSelection/SensorSelection.md)
- [センサ端末の定義とArduino用プログラムの生成](CodeGeneration/Abstract.md)
- [センサ端末の動作確認](Check/MQTT_Box.md)

## 2. 管理者の作業
まずはじめに，センサを接続するIoTネットワークを構築するための機材の調達および，IoTネットワークと
インターネット(もしくはイントラネット)を接続するためのIoTゲートウェイとなるサーバの構築を行う必要がある．
ここでは，IoTゲートウェイとしてRaspberry Piを使うことを想定しており，以下の手順書を参照して作業していただきたい．
- [センサ接続用ネットワークの構築](SensorNetwork/SensorNetwork.md)

次の段階として，センサ端末を作成するユーザ(管理者自身も含む)が利用するArduinoおよび周辺回路の部材を調達し，必要に応じてはんだ付け等を行う必要がある．
本開発環境では，簡易なはんだ付けしか要求しない部材でセンサ端末を構築できるようにしているが，Arduinoに接続する周辺回路のいくつかははんだ付けが必要になる．
以下の手順書を参考に作業していただきたい．
- [買い揃えるべき部材やその準備(はんだ付け)について](Parts_Selection/Parts_Selection.md)

本開発環境で作成するセンサ端末では，マイクロSDにログファイルを残すのに加えて，IoTゲートウェイで動作するMQTTブローカに測定データを
時刻情報付きで送信するため，ArduinoにはRTCを繋ぐことを推奨している．センサ端末作成前にRTCに電池を入れ，時刻情報を書き込んでおく
必要があるため，次の手順書を参照して時刻の書き込みとその結果の確認を行っていただきたい．
- [Arduino用RTCの時刻設定](RTC/RTC_Setting.md)

最後の段階として，購入，はんだ付けなどをした部材を組み立てて，センサを繋ぐだけでセンサ端末のハードウェアとして完成する
ベースのシステムを組み立てる必要がある．この作業は以下の手順書を参照して実施する．
なお，この手順については，ユーザ自身に実施してもらうこともあり得るが，配布の準備などもあるため，
組み立てをユーザに実施してもらう場合も，管理者は手順書に目を通していただきたい．
- [基本システム組み立て](Hardware_Setup/Assembly.md)

## 3. カスタマイズ
WiFiのSSIDや固定IPアドレスの場合の設定など，本開発環境を使う組織に共通の情報を各種設定ファイルのデフォルト値にする方法は以下のドキュメントを参照して
ファイルを編集してください．
- [カスタム](Customize/Custom.md)

***
- [「ドキュメント構成」に戻る](../Documents.md)
